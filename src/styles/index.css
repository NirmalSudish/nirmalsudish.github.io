@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg-primary: #ffffff;
  --text-primary: #111111;
}

html.dark {
  --bg-primary: #111111;
  --text-primary: #ffffff;
}

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-y: auto;
  overflow-x: hidden;
  background-color: var(--bg-primary);
  /* Smooth "liquid" transition for project color shifts */
  transition: background-color 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), color 0.3s ease;
  color: var(--text-primary);
  cursor: none;
}

/* Hides the Top Navbar when Lightbox is active */
.lightbox-open .fixed.top-0 {
  display: none;
}

/* Hides the Bottom Progress bar when Lightbox is active */
.lightbox-open .fixed.bottom-10 {
  display: none;
}

/* REPAIRED: Default mobile styles */
.snap-container {
  height: 100dvh;
  /* Use dynamic viewport height for mobile too */
  width: 100vw;
  overflow-y: auto;
  scroll-snap-type: y proximity;
  /* Changed: proximity reduces aggressive hijacking of scroll */
  overscroll-behavior-y: contain;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  /* Added: smooth scrolling */
}

.snap-section {
  min-height: 100dvh;
  /* Ensure full viewport height */
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  padding: 5rem 0;
  scroll-snap-align: start;
  scroll-snap-stop: normal;
  /* Changed: from always to normal - reduces jitter */
}

/* REPAIRED: Snapping behavior for larger screens */
@media (min-width: 1024px) {

  /* Changed to 1024px for a more robust desktop breakpoint */
  .snap-container {
    height: 100dvh;
    overflow-y: scroll;
    scroll-snap-type: y proximity;
    /* Changed: proximity reduces jitter on desktop */
    scroll-behavior: smooth;
    /* Added: smooth scroll behavior */
    overscroll-behavior-y: contain;
  }

  .snap-section {
    height: 100dvh;
    min-height: 0;
    scroll-snap-align: start;
    scroll-snap-stop: normal;
    /* Changed: from always - less aggressive snapping */
    padding: 0;
  }

  /* Specific adjustment for the last section on desktop to accommodate the footer */
  .snap-section:last-child {
    justify-content: space-between;
    padding-top: 6rem;
    /* Adjust this value to match your navbar height */
  }
}

/* ========================================
   DESKTOP LAYOUT STABILIZATION
   Ensures consistent visuals across all desktop/laptop resolutions
   ======================================== */

@media (min-width: 1024px) {

  /* Force all sections to be exactly viewport height - no overflow */
  .snap-section {
    height: 100dvh !important;
    max-height: 100dvh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    box-sizing: border-box;
  }

  /* Ensure the main container fills viewport exactly */
  .snap-container {
    height: 100dvh;
    max-height: 100dvh;
    overflow-x: hidden;
  }

  /* Consistent content containment */
  .snap-section>* {
    max-height: 100%;
    overflow: visible;
  }
}

/* Resolution-independent scaling for large screens */
@media (min-width: 1920px) {

  /* Cap maximum content width for ultra-wide displays */
  .container {
    max-width: 1600px;
  }
}

@media (min-width: 2560px) {

  /* 4K and above: prevent elements from becoming too large */
  .container {
    max-width: 1800px;
  }

  /* Scale down fonts that might become too large on 4K */
  .hero-title-responsive {
    font-size: clamp(4.5rem, 10vw, 12rem);
  }
}

/* Ensure consistent aspect ratios for project cards across resolutions */
@media (min-width: 1024px) {
  .project-card {
    /* Use consistent relative sizing */
    flex-shrink: 0;
    contain: layout style;
  }
}

/* Prevent layout shift on viewport resize */
@media (min-width: 1024px) {
  section[id="work"] {
    /* Contain the work section to prevent overflow issues */
    contain: layout;
    overflow: hidden;
  }

  section[id="about"] {
    /* Ensure about section content stays within bounds */
    contain: layout;
    overflow: hidden;
  }

  section[id="contact"] {
    /* Contact section containment */
    contain: layout;
  }
}

@keyframes textGradient {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

.animate-text-gradient {
  background-size: 200% auto;
  animation: textGradient 5s ease-in-out infinite;
}

@keyframes marquee {
  0% {
    transform: translateX(0);
  }

  100% {
    /* For 3 identical sets of items, move by 1/3 to loop seamlessly */
    transform: translateX(-33.333333%);
  }
}

.animate-marquee-slow {
  animation: marquee 60s linear infinite;
}

/* Ensures the marquee pauses instantly when buttons are clicked */
[style*="animation-play-state: paused"] {
  animation-play-state: paused !important;
}

.hero-title-responsive {
  font-size: clamp(4.5rem, 14vw, 14rem);
  line-height: 0.85;
  letter-spacing: -0.04em;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Line clamp utilities for text truncation */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Mobile project card styles */
.mobile-project-card {
  max-width: 100%;
  overflow: hidden;
}

.mobile-project-card img,
.mobile-project-card video {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Improved spinner animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

/* ========================================
   MOBILE PERFORMANCE OPTIMIZATIONS
   ======================================== */

/* Respect user's preference for reduced motion */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Mobile-specific performance optimizations */
@media (max-width: 768px) {

  /* Reduce transition durations on mobile */
  * {
    transition-duration: 0.15s !important;
  }

  /* Disable hover effects on touch devices */
  @media (hover: none) {

    .group-hover\/card\:scale-105,
    .hover\:scale-105 {
      transform: none !important;
    }
  }

  /* Optimize images for mobile rendering */
  img {
    content-visibility: auto;
    contain-intrinsic-size: 300px 200px;
  }

  /* Reduce backdrop blur on mobile (GPU intensive) */
  .backdrop-blur-xl,
  .backdrop-blur-2xl,
  .backdrop-blur-3xl {
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
  }

  /* Simplify shadows on mobile */
  .shadow-2xl {
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1) !important;
  }

  /* Disable the marquee animation on mobile */
  .animate-marquee-slow {
    animation: none !important;
  }
}

/* GPU acceleration hints for smoother animations */
.mobile-project-card,
.project-card {
  will-change: auto;
  /* Let browser decide, reduces memory usage */
  contain: layout style paint;
}

/* Optimize video rendering */
video {
  object-fit: contain;
  background-color: transparent;
}

/* Touch-friendly tap targets */
@media (pointer: coarse) {
  button {
    min-height: 44px;
    min-width: 44px;
  }
}